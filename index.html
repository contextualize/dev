<head>
    <title>benci.ai</title>
    <style>
        body {
            margin: 0;
            padding: 0
        }
    </style>
</head>

<body>
    <p id="target"></p>
</body>

<script>
    // Set the loading text.
    const url = new URL(window.location.href);
    const target = document.querySelector('#target');
    target.innerText = url.searchParams.get('loading') || '...';

    const resize = () => {
        window.parent.postMessage({ name: self.name, height: target.scrollHeight }, '*');
    };

    window.callback = function (txt) {
        target.innerText = txt;
        resize();
    };

    (function () {
        resize();
        const elem = document.createElement('script');
        elem.src = './gen.js';
        elem.dataset.callback = 'callback';
        ['type', 'size', 'prompt']
            .filter(x => url.searchParams.has(x))
            .forEach(x => elem.dataset[x] = url.searchParams.get(x));
        document.head.appendChild(elem);
        document.currentScript.remove();
    })();

</script>